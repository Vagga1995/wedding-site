
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ni x Ni</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Montserrat:wght@300;400;600&family=Lobster+Two&display=swap" rel="stylesheet">

  <style>
    :root {
      --sage: #D4B896;
      --sage-dark: #C9A876;
      --text: #ffffff;
      --ink: #222;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    html {
      height: 100%;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: #fff;
      color: var(--ink);
      scroll-behavior: smooth;
      display: flex;
      flex-direction: column;
      min-height: 100%;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
    }

    .pane-left {
      width: 100%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .pane-right {
      display: none;
      width: 40%;
      overflow: hidden;
      align-items: center;
      justify-content: center;
      background: url("https://rsvpify-v3.s3.amazonaws.com/events/291/form/images/1580/background.png?id=860904658285") center/cover fixed;
      position: relative;
    }

    .pane-right img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .pane-right section {
      width: 90%;
      padding: 40px 20px;
      background: rgba(150, 174, 151, 0.85);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .pane-right .rsvp-box {
      background: rgba(255,255,255,0.25);
    }

    .pane-right input,
    .pane-right select {
      background: rgba(255,255,255,0.95);
      color: var(--ink);
    }

    .pane-right button {
      background: white;
      color: var(--ink);
    }


    /* ---------------- NAV ---------------- */
    .nav-toggle {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1001;
      font-size: 28px;
      cursor: pointer;
      color: var(--ink);
    }

    .rsvp-fab {
      position: fixed;
      top: 18px;
      right: 20px;
      z-index: 1002;
      background: var(--sage);
      color: #5C4033;
      border: none;
      border-radius: 999px;
      padding: 20px 30px;
      font-family: 'Lobster Two', cursive;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.5px;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
    }

    .rsvp-fab:active {
      transform: translateY(1px);
    }

    .rsvp-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }

    .rsvp-modal.open {
      opacity: 1;
      pointer-events: auto;
    }

    .rsvp-card {
      width: min(90vw, 420px);
      background: #fff;
      border-radius: 14px;
      padding: 28px;
      box-shadow: 0 12px 36px rgba(0,0,0,0.25);
      text-align: left;
      position: relative;
      animation: cardIn 0.25s ease;
    }

    .rsvp-card h3 {
      font-family: 'Lobster Two', cursive;
      font-size: 28px;
      margin-bottom: 10px;
      color: #5C4033;
    }

    .rsvp-card p {
      margin-bottom: 14px;
      color: #444;
      font-weight: 600;
    }

    .rsvp-card input,
    .rsvp-card select {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 15px;
      margin-bottom: 14px;
    }

    .rsvp-card button:not(.rsvp-close) {
      width: 100%;
      padding: 12px 14px;
      border: none;
      border-radius: 8px;
      background: var(--sage-dark);
      color: #fff;
      font-family: 'Lobster Two', cursive;
      font-size: 16px;
      cursor: pointer;
    }

    .rsvp-close {
      position: absolute;
      top: 10px;
      right: 12px;
      background: transparent;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #666;
      width: auto;
      padding: 6px;
      box-shadow: none;
    }

    .rsvp-fade-out {
      animation: cardOut 0.2s ease forwards;
    }

    @keyframes cardIn {
      from { transform: translateY(8px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes cardOut {
      from { transform: translateY(0); opacity: 1; }
      to { transform: translateY(-6px); opacity: 0; }
    }

    .rsvp-fab.pulse {
      animation: rsvpPulse 1.6s ease-in-out infinite;
    }

    .rsvp-fab.pulse::after {
      content: '';
      position: absolute;
      inset: -6px;
      border-radius: 999px;
      border: 2px solid rgba(255, 248, 230, 0.9);
      box-shadow: 0 0 0 0 rgba(255, 248, 230, 0.65);
      animation: rsvpGlow 1.6s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes rsvpPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 8px 24px rgba(0,0,0,0.18); }
      50% { transform: scale(1.05); box-shadow: 0 12px 30px rgba(0,0,0,0.22); }
    }

    @keyframes rsvpGlow {
      0%, 100% { opacity: 0.3; box-shadow: 0 0 0 0 rgba(255, 248, 230, 0.0); }
      50% { opacity: 1; box-shadow: 0 0 18px 6px rgba(255, 248, 230, 0.6); }
    }
    .nav {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 20%;
      background: rgba(255,255,255,0.98);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      padding: 80px 30px;
      z-index: 1000;
      overflow-y: auto;
    }

    .nav.open {
      transform: translateX(0);
    }

    .nav a {
      display: block;
      font-size: 16px;
      margin: 20px 0;
      color: var(--ink);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }

    .nav a:hover {
      color: var(--sage);
    }

    /* ---------------- SPLASH SCREEN ---------------- */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #F6EADA;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease-out;
    }

    .splash-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .splash-screen video {
      width: auto;
      height: auto;
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
      object-position: center;
      clip-path: inset(15% 0);
    }

    /* ---------------- HERO ---------------- */
    .hero {
      height: 100vh;
      min-height: 100vh;
      background:
        linear-gradient(rgba(0,0,0,0.25), rgba(0,0,0,0.25)),
        url("./images/img1.jpeg") center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--text);
      position: relative;
      flex-shrink: 0;
      background-attachment: fixed;
    }

    .hero h1 {
      font-family: 'Lobster Two', cursive;
      font-size: 64px;
      margin-bottom: 10px;
    }

    .hero p {
      letter-spacing: 2px;
      font-size: 14px;
      opacity: 0.9;
    }

    .scroll {
      position: absolute;
      bottom: 30px;
      width: 100%;
      text-align: center;
      font-size: 12px;
      letter-spacing: 2px;
      opacity: 0.8;
    }

    /* ---------------- SECTIONS ---------------- */
    section {
      padding: 100px 20px;
      text-align: center;
      background: white;
      color: #222;
    }

    .sage {
      background: white;
      color: #222;
    }

    .sage h2 {
      background: 
        url("./images/Colourfu-leaves-and-flowers.png") center/cover no-repeat,
        var(--sage);
      background-attachment: fixed;
      color: #FFFFFF;
      padding: 40px 20px;
      margin: -100px -20px 30px -20px;
      font-family: 'Lobster Two', cursive;
      font-size: 38px;
      position: relative;
      z-index: 2;
      font-weight: 900;
      text-shadow: 
        -2px -2px 0 #000,
        2px -2px 0 #000,
        -2px 2px 0 #000,
        2px 2px 0 #000,
        -2px 0 0 #000,
        2px 0 0 #000,
        0 -2px 0 #000,
        0 2px 0 #000,
        -1px -1px 0 #000,
        1px -1px 0 #000,
        -1px 1px 0 #000,
        1px 1px 0 #000,
        3px 3px 6px rgba(0, 0, 0, 0.7);
      letter-spacing: 1px;
    }

    .sage h2::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(212, 184, 150, 0.65);
      z-index: 0;
    }

    .sage h2::after {
      content: attr(data-text);
      position: relative;
      z-index: 2;
    }

    section h2 {
      font-family: 'Lobster Two', cursive;
      font-size: 42px;
      margin-bottom: 10px;
      color: #222;
    }

    .date {
      opacity: 0.85;
      margin-bottom: 30px;
      font-weight: 700;
      color: #5C4033;
    }

    .sage p {
      font-weight: 700;
      color: #5C4033;
    }

    section p {
      max-width: 800px;
      margin: auto;
      line-height: 1.8;
      font-size: 16px;
      font-weight: 600;
    }

    /* ---------------- RSVP ---------------- */
    .rsvp-box {
      max-width: 500px;
      margin: auto;
      background: rgba(255,255,255,0.15);
      padding: 40px;
      border-radius: 6px;
      backdrop-filter: blur(10px);
    }

    .rsvp-box input,
    .rsvp-box select {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border: none;
      font-size: 14px;
    }

    .rsvp-box button {
      width: 100%;
      padding: 15px;
      background: white;
      border: none;
      font-family: 'Lobster Two', cursive;
      font-size: 16px;
      cursor: pointer;
    }

    footer {
      padding: 60px 20px;
      font-size: 12px;
      color: #777;
      text-align: center;
    }

    @media (max-width: 768px) {
      body {
        flex-direction: column;
        height: auto;
      }
      .pane-left {
        width: 100%;
        overflow-y: auto;
      }
      .pane-right {
        display: none;
      }
      .hero h1 { font-size: 44px; }
      section { padding: 70px 20px; }
      .nav {
        width: 80vw;
        max-width: 320px;
        min-width: 240px;
        padding: 70px 24px;
      }
      .nav a {
        font-size: 18px;
        line-height: 1.4;
        margin: 16px 0;
        white-space: normal;
      }
      .rsvp-fab {
        top: 14px;
        right: 14px;
        padding: 18px 22px;
        font-size: 20px;
      }
    }

    @supports (height: 100svh) {
      .hero {
        height: 100svh;
        min-height: 100svh;
      }
    }

    @supports (-webkit-touch-callout: none) {
      .hero,
      .sage h2,
      .pane-right {
        background-attachment: scroll;
      }
    }
  </style>
</head>

<body>

  <!-- SPLASH SCREEN -->
  <div class="splash-screen" id="splashScreen">
    <video autoplay loop muted playsinline webkit-playsinline preload="auto" style="max-width: 80%; max-height: 80%; object-fit: contain;">
      <source src="./images/Animation-entry.mp4" type="video/mp4">
    </video>
  </div>
  <!-- NAV -->
  <div class="nav-toggle" onclick="toggleNav()">‚ò∞</div>
  <button class="rsvp-fab" id="rsvpFab" type="button">RSVP</button>

  <nav class="nav" id="nav">
    <a href="#couple">Couple Names</a>
    <a href="#how">How We Met</a>
    <a href="#proposal">The Proposal</a>
    <a href="#hashtag">Wedding Hashtag</a>
    <a href="#schedule">Schedule</a>
    <a href="#events">Schedule of Events</a>
    <a href="#things">Things To Do</a>
    <a href="#accommodations">Accommodations</a>
    <a href="#faq">FAQ</a>
    <a href="#party">Wedding Party</a>
    <a href="#registry">Registry</a>
  </nav>

  <!-- LEFT PANE (SCROLLABLE) -->
  <div class="pane-left">
    <!-- HERO -->
    <section class="hero">
      <div>
        <h1>Niyeti & Nikhil</h1>
        <p>December 15-17, 2024 ‚Ä¢ Goa, India</p>
      </div>
      <div class="scroll">SCROLL DOWN</div>
    </section>

    <!-- HOW WE MET -->
    <section id="how" class="sage">
      <h2>How We Met</h2>
      <div class="date">October 2020</div>
      <p>
        We met during our Master‚Äôs studies in a beautiful town in Germany, surrounded by snow, sunshine, and crystal-clear lakes. Our story began as a friendship and slowly grew into something more, until we realized that life felt warmer, fuller, and complete together. Five years, shared journeys, and countless memories later, here we are, planning our forever.
      </p>
    </section>

    <!-- PROPOSAL -->
    <section id="proposal" class="sage">
      <h2>The Proposal</h2>
      <div class="date">December 2025</div>
      <p>
        What started as a weekend trip from Munich to Dolomites, Italy turned into a moment we‚Äôll never forget. At sunset, on a snowy cliff overlooking the mountains, we walked into a surprise Nikhil, with the help of our friends, had set up. Somewhere between happy shock, laughter, and the sky turning gold, a knee was bent and a very enthusiastic yes was said, marking the beginning of planning an event celebrating love, family, and togetherness.
      </p>
    </section>

    <!-- SCHEDULE -->
    <section id="schedule" class="sage">
      <h2>Schedule of Events</h2>

      <div style="max-width: 700px; margin: auto; text-align: left;">

        <div style="margin-bottom: 50px;">
          <h3 style="font-family: 'Lobster Two', cursive; font-size: 28px; margin-bottom: 15px; color: #8B6838;">December 15 ‚Ä¢ 2:00 PM</h3>
          <p style="text-align: left; font-weight: 600; margin-bottom: 10px; color: #8B6838;">‚ú® Check-in at the Resort</p>
          <p style="text-align: left; opacity: 0.95; margin-bottom: 15px; color: #8B6838;">
            Nanu Beach Resort & Spa<br>
            Betalbatim, Goa<br>
            <a href="https://share.google/61zc4Cxl6EqFF04ph" style="color: #8B6838; text-decoration: underline;" target="_blank" rel="noopener">Visit Hotel Website</a>
          </p>
          <p style="text-align: left; font-weight: 600; margin-top: 20px; color: #8B6838;">üéâ Evening: Haldi & Devgon</p>
          <p style="text-align: left; opacity: 0.95; color: #8B6838;">
            Followed by music, games and dinner
          </p>
        </div>

        <div style="margin-bottom: 50px; border-top: 2px solid rgba(150,174,151,0.3); padding-top: 50px;">
          <h3 style="font-family: 'Lobster Two', cursive; font-size: 28px; margin-bottom: 15px; color: #8B6838;">December 16</h3>
          <p style="text-align: left; font-weight: 600; margin-bottom: 10px; color: #8B6838;">üíç 9:00 AM - Wedding Ceremony</p>
          <p style="text-align: left; opacity: 0.95; margin-bottom: 30px; color: #8B6838;">
            The big moment we've been waiting for!
          </p>
          <p style="text-align: left; font-weight: 600; margin-bottom: 10px; color: #8B6838;">üçπ 6:00 PM - Cocktail Party</p>
          <p style="text-align: left; opacity: 0.95; color: #8B6838;">
            Dinner, drinks & dancing to follow!
          </p>
        </div>

        <div style="border-top: 2px solid rgba(150,174,151,0.3); padding-top: 50px;">
          <h3 style="font-family: 'Lobster Two', cursive; font-size: 28px; margin-bottom: 15px; color: #8B6838;">December 17 ‚Ä¢ 11:00 AM</h3>
          <p style="text-align: left; font-weight: 600; color: #8B6838;">üåÖ Check-out from Resort</p>
          <p style="text-align: left; opacity: 0.95; margin-top: 10px; color: #8B6838;">
            We will keep updating the event flow and timings here for all days...
          </p>
        </div>

      </div>
    </section>


    <!-- THINGS TO DO -->
    <section id="things" class="sage">
      <h2>Things To Do</h2>
      <p>
        Explore the local area, enjoy the gardens, and discover nearby attractions.
      </p>
      <ul style="max-width: 800px; margin: 20px auto 0; text-align: left; line-height: 1.8; font-size: 16px; font-weight: 600; color: #5C4033; padding-left: 20px;">
        <li>Explore nearby beaches like Betalbatim beach (just steps away), Sernabatim beach or Colva beach.</li>
        <li>Magzika Beach Shack &amp; Baggies Beach Shack - Great for casual beachside meals.</li>
        <li>A3 Bros Restaurant and Bar - Highly rated local favourite.</li>
      </ul>
    </section>

    <!-- ACCOMMODATIONS -->
    <section id="accommodations" class="sage">
      <h2>Accommodations</h2>
      <p>
        Special room rates available at partner hotels. Details coming soon.
      </p>
      <p style="max-width: 800px; margin: 20px auto 0; line-height: 1.8; font-size: 16px; font-weight: 600; color: #5C4033;">
        Want to extend your stay in Goa? Check out these accommodations around:
      </p>
      <ol style="max-width: 800px; margin: 10px auto 0; text-align: left; line-height: 1.8; font-size: 16px; font-weight: 600; color: #5C4033; padding-left: 20px;">
        <li><a href="https://share.google/0QgMi6WPpjC25yex1" style="color: #5C4033; text-decoration: underline;" target="_blank" rel="noopener">Beleza By The Beach</a></li>
        <li><a href="https://share.google/CqitrFtoTG1W3EIPu" style="color: #5C4033; text-decoration: underline;" target="_blank" rel="noopener">Salcete Beach Resort</a></li>
        <li><a href="https://maps.app.goo.gl/Cf2cdQW5C7WFwAzg6" style="color: #5C4033; text-decoration: underline;" target="_blank" rel="noopener">Kenilworth Resort &amp; Spa</a></li>
        <li><a href="https://maps.app.goo.gl/QMzRT8UA4ukLy41p6" style="color: #5C4033; text-decoration: underline;" target="_blank" rel="noopener">Wildflower Villas An Eco-luxury Hideaway</a></li>
      </ol>
    </section>

    <!-- FAQ -->
    <section id="faq" class="sage">
      <h2>FAQ</h2>
      <p>
        Have questions? Check back soon for frequently asked questions and answers.
      </p>
    </section>

    <!-- WEDDING PARTY -->
    <section id="party" class="sage">
      <h2>Wedding Party</h2>
      <p>
        Meet our wonderful wedding party members.
      </p>
    </section>

    <!-- REGISTRY -->
    <section id="registry" class="sage">
      <h2>Registry</h2>
      <p>
        Your presence is the greatest gift. Registry details coming soon.
      </p>
    </section>

    <!-- RSVP section removed in favor of floating button + modal -->

    <footer>
      Made with love ‚Ä¢ Ni & Ni
    </footer>
  </div>

  <!-- RIGHT PANE (FIXED DESKTOP ONLY) -->
  <div class="pane-right">
    <div style="width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
      <!-- LOGO -->
      <img src="./images/img1.jpeg" alt="logo" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">

      <!-- RSVP (Desktop) -->
      <section id="rsvp-desktop" class="sage">
        <h2>RSVP</h2>
        <div class="rsvp-box">
          <form name="submit-to-google-sheet">
            <input name="Name" placeholder="Your Name" required />
            <input name="Email" type="email" placeholder="Your Email" required />
            <select name="Attending" required>
              <option value="">Will you attend?</option>
              <option>Yes</option>
              <option>No</option>
            </select>
            <button type="submit">Confirm</button>
          </form>
        </div>
      </section>
    </div>
  </div>

  <!-- RSVP Modal -->
  <div class="rsvp-modal" id="rsvpModal" aria-hidden="true">
    <div class="rsvp-card" id="rsvpCard" role="dialog" aria-modal="true">
      <button class="rsvp-close" id="rsvpClose" type="button">‚úï</button>
      <div id="rsvpStep"></div>
    </div>
  </div>


  <script>
    // Hide splash screen after 2 seconds
    setTimeout(() => {
      const splashScreen = document.getElementById('splashScreen');
      if (splashScreen) {
        splashScreen.classList.add('hidden');
      }
    }, 2000);

    // iOS Safari: best-effort autoplay for inline muted video
    const splashVideo = document.querySelector('#splashScreen video');
    if (splashVideo) {
      const tryPlay = () => {
        const playPromise = splashVideo.play();
        if (playPromise && typeof playPromise.catch === 'function') {
          playPromise.catch(() => {});
        }
      };
      tryPlay();
      document.addEventListener('touchend', tryPlay, { once: true });
    }

    const nav = document.getElementById('nav');
    const navToggle = document.querySelector('.nav-toggle');
    const navLinks = document.querySelectorAll('.nav a');

    function toggleNav() {
      nav.classList.toggle('open');
    }

    function closeNav() {
      nav.classList.remove('open');
    }

    // Close nav when clicking a link
    navLinks.forEach(link => {
      link.addEventListener('click', closeNav);
    });

    // Close nav when clicking outside
    document.addEventListener('click', (e) => {
      if (!nav.contains(e.target) && !navToggle.contains(e.target)) {
        closeNav();
      }
    });

    // RSVP modal stepper
    const rsvpFab = document.getElementById('rsvpFab');
    const rsvpModal = document.getElementById('rsvpModal');
    const rsvpClose = document.getElementById('rsvpClose');
    const rsvpStep = document.getElementById('rsvpStep');
    const rsvpCard = document.getElementById('rsvpCard');

    const rsvpData = {
      name: '',
      email: '',
      attending: ''
    };
    const rsvpEndpoint = 'https://script.google.com/macros/s/AKfycbx9cbevZyqf368wxbH5zTE-ywxcL7tZxmpLoSpD63vzfArq-Rg8NusXT2z41n59n-GL/exec';

    const steps = [
      {
        title: 'RSVP',
        text: 'What is your full name?',
        input: '<input id="rsvpName" name="Name" placeholder="Your Name" required />'
      },
      {
        title: 'RSVP',
        text: 'What is your email?',
        input: '<input id="rsvpEmail" name="Email" type="email" placeholder="Your Email" required />'
      },
      {
        title: 'RSVP',
        text: 'Will you attend?',
        input: `<select id="rsvpAttend" name="Attending" required>
                  <option value="">Select one</option>
                  <option>Yes</option>
                  <option>No</option>
                </select>`
      }
    ];

    let stepIndex = 0;

    function openRsvp() {
      stepIndex = 0;
      rsvpModal.classList.add('open');
      rsvpModal.setAttribute('aria-hidden', 'false');
      renderStep();
    }

    function closeRsvp() {
      rsvpModal.classList.remove('open');
      rsvpModal.setAttribute('aria-hidden', 'true');
    }

    function renderStep() {
      const step = steps[stepIndex];
      rsvpStep.innerHTML = `
        <h3>${step.title}</h3>
        <p>${step.text}</p>
        ${step.input}
        <button type="button" id="rsvpNext">${stepIndex < steps.length - 1 ? 'Next' : 'Submit'}</button>
      `;

      const nextBtn = document.getElementById('rsvpNext');
      nextBtn.addEventListener('click', () => {
        const inputEl = rsvpStep.querySelector('input, select');
        if (!inputEl || !inputEl.value) {
          inputEl && inputEl.focus();
          return;
        }

        if (inputEl.id === 'rsvpName') rsvpData.name = inputEl.value.trim();
        if (inputEl.id === 'rsvpEmail') rsvpData.email = inputEl.value.trim();
        if (inputEl.id === 'rsvpAttend') rsvpData.attending = inputEl.value;

        rsvpCard.classList.add('rsvp-fade-out');
        setTimeout(() => {
          rsvpCard.classList.remove('rsvp-fade-out');
          stepIndex += 1;
          if (stepIndex < steps.length) {
            renderStep();
          } else {
            rsvpStep.innerHTML = `
              <h3>Submitting...</h3>
              <p>Please wait a moment.</p>
            `;

            const formBody = new URLSearchParams({
              Name: rsvpData.name,
              Email: rsvpData.email,
              Attending: rsvpData.attending
            });

            fetch(rsvpEndpoint, {
              method: 'POST',
              body: formBody
            }).then(() => {
              rsvpStep.innerHTML = `
                <h3>Thank you!</h3>
                <p>Your response has been recorded.</p>
                <button type="button" id="rsvpDone">Close</button>
              `;
              document.getElementById('rsvpDone').addEventListener('click', closeRsvp);
            }).catch(() => {
              rsvpStep.innerHTML = `
                <h3>Something went wrong</h3>
                <p>Please try again.</p>
                <button type="button" id="rsvpRetry">Retry</button>
              `;
              document.getElementById('rsvpRetry').addEventListener('click', () => {
                stepIndex = steps.length - 1;
                renderStep();
              });
            });
          }
        }, 200);
      });
    }

    rsvpFab.addEventListener('click', () => {
      rsvpFab.classList.remove('pulse');
      openRsvp();
    });
    rsvpClose.addEventListener('click', closeRsvp);
    rsvpModal.addEventListener('click', (e) => {
      if (e.target === rsvpModal) closeRsvp();
    });

    // Pulse RSVP button until the "How We Met" section is reached
    if (rsvpFab) {
      rsvpFab.classList.add('pulse');
      const howSection = document.getElementById('how');
      const stopPulse = () => {
        rsvpFab.classList.remove('pulse');
        window.removeEventListener('scroll', stopPulse);
      };
      if (howSection) {
        const onScroll = () => {
          const rect = howSection.getBoundingClientRect();
          if (rect.top <= 20) stopPulse();
        };
        onScroll();
        window.addEventListener('scroll', onScroll, { passive: true });
      } else if (window.scrollY > 0) {
        rsvpFab.classList.remove('pulse');
      }
    }
  </script>

</body>
</html>
